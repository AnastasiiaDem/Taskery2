<!--<div class="box circle" (click)="addTask(content)">-->
<!--  <span class="tooltiptext">Add new task</span>-->
<!--  <p class="add">&#65291;</p>-->
<!--</div>-->


    <div style="margin: 3rem auto 1rem; text-align: center;">
      <span class="tooltiptext">Add new task</span>
      <button (click)="addTask(content)" mat-mini-fab aria-label="Create new task" class="add-btn" id="mat-btn">
        <mat-icon style="color: #666666 !important;">add</mat-icon>
      </button>
    </div>

<div class="w3-animate-opacity" style="margin: 0 auto; width: 95%;">
  <button [ngClass]="onlyMyIssues ? 'my-tasks' : 'all-tasks'" (click)="updateKanban()">Only My Issues</button>
  <ejs-kanban #kanban keyField='status'
              [dataSource]='tasks'
              [cardSettings]='cardSettings'
              (dialogOpen)='openModal(content, $event)'
              (dragStop)="drop($event)">
    <e-columns>
      <e-column headerText='To Do' keyField='To Do'></e-column>
      <e-column headerText='In Progress' keyField='In Progress'></e-column>
      <e-column headerText='On Review' keyField='On Review'></e-column>
      <e-column headerText='Done' keyField='Done'></e-column>
    </e-columns>
    <ng-template #cardSettingsTemplate let-data>
      <div class='e-card-content' (click)="setBackground=!setBackground">
        <table class="card-template-wrap">
          <tbody>
          <tr>
            <td class="CardHeader">
              {{data.title}}
              <p class="card-deadline">{{data.deadline | date}}</p>
            </td>
          </tr>
          <tr>
            <td class="CardBody">{{data.description}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </ng-template>
  </ejs-kanban>
</div>
<ng-template #content let-modal>
  <div class="container">
    <div class="row align-items-center">
      <div class="card-header px-lg-5">
        <div class="card-heading text-primary">{{addTaskFlag ? 'Add new task' : 'Update the task'}}
          <img *ngIf="!addTaskFlag" src="./assets/images/icons8-trash-can-480.png" alt="" class="trash"
               (click)="deleteTask(modal)">
        </div>
      </div>
      <div class="card-body" style="padding: 2rem!important;">
        <form [formGroup]="taskForm" (ngSubmit)="onSubmit(modal)">
          <div style="display: flex;">
            <div class="form-floating right-field" style="width: 100%; margin-left: 0 !important;">
              <input class="form-control" type="text" placeholder="Title" formControlName="title"
                     [ngClass]="{ 'is-invalid': taskForm.invalid && f.title.errors }" required>
              <label>Title</label>
            </div>
          </div>
          <div class="form-floating mb-3">
            <textarea class="form-control" style="padding-top: 0.5rem;" cols="2" rows="5" formControlName="description"
                      placeholder="Description"></textarea>
          </div>
          <div class="form-floating mb-3">
            <ng-select2 formControlName="employeeId" [width]="'100%'" [data]="employeeData">
            </ng-select2>
          </div>
          <div style="display: flex; align-items: center; margin-bottom: 1rem;">
            <div class="form-floating mb-3" style="width: 30%;">
              <input class="form-control" type="date" placeholder="Deadline date" formControlName="deadline"
                     [ngClass]="{ 'is-invalid': taskForm.invalid && f.deadline.errors }" required>
              <label>Deadline date</label>
            </div>
            <div class="form-floating right-field" style="width: 70%;">
              <ng-select2 formControlName="status" [width]="'100%'" [data]="statusData">
              </ng-select2>
            </div>
          </div>
          <button class="btn btn-primary close-button" type="submit"
                  style="border-radius: 0 0 calc(1rem - 1px) calc(1rem - 1px)"
                  [disabled]="taskForm.invalid">submit
          </button>
        </form>
      </div>
    </div>
  </div>
</ng-template>

<ngx-spinner bdColor = "rgb(170 170 170 / 50%)" size = "default" color = "rgb(32 32 32)" type = "ball-atom" [fullScreen] = "true"></ngx-spinner>
